(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1175:function(a,b,c){"use strict";c.r(b),c.d(b,{Home:function(){return aB},default:function(){return aC}});var d=c(3853),e=c.n(d),f=c(9008),g=c.n(f),h=c(5893);let i=()=>(0,h.jsxs)(g(),{children:[(0,h.jsx)("title",{children:"Next D3 Starter"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),j=({children:a})=>(0,h.jsxs)("div",{className:e().container,children:[(0,h.jsx)(i,{}),(0,h.jsx)("main",{className:e().main,children:a})]});var k=c(7294);let l=({frame:a,margins:b,prev:c})=>{let d={...c};return d.frame=a,d.graph.height=a.height-(b.bottom+b.top),d.graph.width=a.width-(b.left+b.right),d.margins=b,d},m=({chartDimensions:a,frame:b,margins:c})=>!Object.is(b,a.frame)||!Object.is(c,a.margins);var n=c(1296),o=c.n(n);let p=a=>{let b=a.current;if(null===b)throw Error("No ref on parent div");return b},q=a=>!Array.isArray(a)||!a.length,r=({array:a,errorMessage:b})=>{if(q(a))throw Error(b??t);return a[s]},s=0,t="Tried to access first entry of empty array",u=(a=v)=>{let b=(0,k.useRef)(null),[c,d]=(0,k.useState)(w),e=a=>{x({resizeObserverEntries:a,setDimensions:d})},f=(0,k.useMemo)(()=>o()(e,a,{leading:!0}),[a]);return(0,k.useEffect)(()=>{let a=p(b),c=new ResizeObserver(f);return c.observe(a),()=>c.unobserve(a)},[f]),{ref:b,dimensions:c}},v=500,w={height:0,width:0},x=({resizeObserverEntries:a,setDimensions:b})=>{let c=z(a);b(a=>Object.is(a,c)?a:c)},y=a=>{let{contentRect:b}=a,c=Math.round(b.height),d=Math.round(b.width);return{height:c,width:d}},z=a=>{let b=r({array:a,errorMessage:"Could not access first entry of resizeObserverEntries."}),c=y(b);return c},A=(a=C)=>{let b=a.margins??B,{ref:c,dimensions:d}=u(),[e,f]=(0,k.useState)({...D,margins:b});return(0,k.useEffect)(()=>{m({chartDimensions:e,frame:d,margins:b})&&f(a=>l({prev:a,frame:d,margins:b}))},[e,d,b]),{ref:c,chartDimensions:e}},B={bottom:10,left:10,right:10,top:10},C={margins:B},D={frame:w,margins:B,graph:w};var E=c(3288),F=c(7979);let G=a=>a.map(([a])=>a);var H=c(9089);let I=a=>{let b=(0,H.Z)(a);return void 0===b[J]?[]:b},J=0,K=(a,b)=>{let c=[...a],{includeZero:d,yRange:e}=b;return e&&(void 0!==e[L]&&(c[L]=e[L]),void 0!==e[M]&&(c[M]=e[M])),d&&(c[L]=0),c},L=0,M=1,N=a=>a.map(([,a])=>a),O=(a,b)=>{let c=I(N(a));return b?K(c,b):c},P=({data:a,graph:b},c)=>{let{height:d,width:e}=b,f=G(a),g=c?.paddingInner??Q,h=c?.paddingOuter??R,i=(0,E.Z)(f,[S,e]).paddingInner(g).paddingOuter(h),j=O(a,c),k=(0,F.Z)(j,[d,S]);return{x:i,y:k}},Q=.2,R=.2,S=0;var T=c(6320);let U=({graph:a,scale:b})=>(0,h.jsx)("g",{transform:`translate(${a.width}, 0)`,"data-testid":"groupGridLines",children:(0,h.jsx)(T.R,{orient:T.K.left,scale:b,ticks:[W],tickSize:a.width,tickLineProps:{strokeDasharray:"2 4",opacity:.5},tickSizeOuter:0,tickFormat:()=>"",domainPathProps:{stroke:"none"}})}),V=({graph:a,scales:b})=>(0,h.jsxs)("g",{children:[(0,h.jsx)(T.R,{orient:T.K.left,scale:b.y,ticks:[W]}),(0,h.jsx)(U,{graph:a,scale:b.y}),(0,h.jsx)("g",{transform:`translate(0, ${a.height})`,children:(0,h.jsx)(T.R,{scale:b.x})})]}),W=4,X=a=>{let[b,c]=(0,k.useState)(!0),d=a.map(([a])=>[a,_]);return setTimeout(()=>{c(!1)},Y),{data:b?d:a,opacity:b?Z:$,isInitial:b}},Y=500,Z=0,$=1,_=0,aa=a=>a.range()[ab],ab=0,ac=a=>a??ad,ad=0;var ae=c(5940),af=c.n(ae);let ag=({graphHeight:a,barWidth:b,className:c,scales:d,x:e,y:f,...g})=>{let i=ac(d.x(e)),j=a-d.y(f);return(0,h.jsx)("rect",{...g,className:`${af().rect} ${c}`,x:i,y:a-j,width:b,height:j,"data-testid":"bar"})},ah=({data:a,scales:b,className:c,...d})=>{let{data:e,opacity:f}=X(a),g=aa(b.y),i=b.x.bandwidth();return(0,h.jsx)("g",{opacity:f,"data-testid":"barChart",children:e.map(([a,e])=>(0,k.createElement)(ag,{...d,key:`${a}`,barWidth:i,className:c,graphHeight:g,scales:b,x:a,y:e}))})},ai=({children:a,margins:b,...c})=>(0,h.jsx)("svg",{children:(0,h.jsx)("g",{...c,transform:`translate(${b.left}, ${b.top})`,"data-testid":"groupGraph",children:a})});var aj=c(4810),ak=c.n(aj);let al=({children:a,className:b,divRef:c,...d})=>(0,h.jsx)("div",{...d,className:`${ak().container} ${b}`,ref:c,"data-testid":"divChartContainer",children:(0,h.jsx)("svg",{...am,width:"100%",height:"100%",style:{display:"block"},"data-testid":"svgChart",children:a})}),am={version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",preserveAspectRatio:"none"};var an=c(6176),ao=c.n(an),ap=c(5668),aq=c(1904),ar=c(8058),as=c.n(ar);let at=({data:a,scales:b,className:c,...d})=>{let{data:e,opacity:f}=X(a),g=b.x.bandwidth()*au,i=(0,ap.Z)().x(([a])=>(b.x(a)??av)+g).y(([,a])=>b.y(a)).curve(aq.Z),j=i(e)??void 0;return(0,h.jsx)("path",{...d,d:j,opacity:f,className:`${as().path} ${c}`,"data-testid":"trendline"})},au=.5,av=0,aw=[["x",50],["a",20],["b",90],["c",60],["d",110],["e",20],["f",80],["g",100],["h",5],["i",80],["j",10],["k",50]],ax={bottom:20,left:25,right:10,top:10},ay={includeZero:!0,paddingInner:.5,paddingOuter:.5},az=()=>{let{ref:a,chartDimensions:b}=A({margins:ax}),{graph:c}=b,d=P({data:aw,graph:c},ay);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(al,{divRef:a,className:ao().container,children:(0,h.jsxs)(ai,{margins:ax,children:[(0,h.jsx)(ah,{data:aw,scales:d}),(0,h.jsx)(at,{data:aw,scales:d}),(0,h.jsx)(V,{graph:c,scales:d})]})})})},aA=()=>(0,h.jsxs)(j,{children:[(0,h.jsx)("h1",{children:"A Next.js + D3 Starter!"}),(0,h.jsx)("em",{children:"Integrates D3 and React following a React first approach:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"DOM is entirely handled by React."}),(0,h.jsx)("li",{children:"SVG elements and transitions are styled with CSS (modules)."}),(0,h.jsx)("li",{children:"Resizes Charts based on the D3 margins convention."}),(0,h.jsx)("li",{children:"Tests with Jest and testing-library."})]}),(0,h.jsx)("div",{children:(0,h.jsx)(az,{})})]}),aB=()=>(0,h.jsx)(aA,{});var aC=aB},8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(1175)}])},5940:function(a){a.exports={rect:"Bar_rect__gfEVU"}},4810:function(a){a.exports={container:"SVGChartContainer_container__SJKe_"}},6176:function(a){a.exports={container:"TestChart_container__ufiSn"}},8058:function(a){a.exports={path:"Trendline_path__TU5qX"}},3853:function(a){a.exports={container:"Layout_container__S4aNf",main:"Layout_main__c1pHS"}}},function(a){a.O(0,[832,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])